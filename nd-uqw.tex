\section{From nowhere denseness to uniform quasi-wideness}\label{sec:uqw}

This section is devoted to the proof of \cref{thm:new-uqw} and \cref{thm:new-vc}. 
We first recall the required preliminaries from graph theory. 

All graphs in this paper are finite, undirected and simple, that is, 
they do not have loops or parallel edges. Our notation is standard,
we refer to~\cite{diestel2012graph} for more background on 
graph theory. 
We write $V(G)$ for the vertex set of a graph $G$ and
$E(G)$ for its edge set. 
The {\em{distance}} between vertices $u$ and $v$ in $G$, denoted $\dist_G(u,v)$, is the length of a shortest path between $u$ and $v$ in~$G$.

A {\em{minor model}} of a graph $H$ in $G$ is a family $(I_u)_{u\in V(H)}$ of pairwise vertex-disjoint connected subgraphs of $G$
such that whenever $uv$ is an edge in~$H$, there are $u'\in I_u$ and $v'\in I_v$ for which $u'v'$ 
is an edge in $G$.
The graph $H$ is a {\em{depth-$r$ minor}} of $G$, denoted $H\minor_rG$, if there is a minor model
$(I_u)_{u\in V(H)}$ of~$H$ in $G$ such that each subgraph $I_u$ has radius at most $r$.

A class $\CCC$ of graphs is \emph{nowhere dense} if there is a function 
$f:\N\rightarrow \N$ such that for all $r\in \N$ it holds that $K_{f(r)}\not\minor_r G$
for all $G\in \CCC$. 

A set $B\subseteq V(G)$ is called {\em{$r$-independent}} in $G$ if for all
distinct $u,v\in B$ we have $\dist_G(u,v)>r$.
A class $\CCC$ of graphs is \emph{uniformly quasi-wide} if there are
functions $N\colon \N\times\N\rightarrow \N$ and $s:\N\rightarrow \N$ such
that for all $r,m\in \N$ and all subsets $A\subseteq V(G)$ for
$G\in \CCC$ of size $\abs{A}\geq N(r,m)$ there is a set
$S\subseteq V(G)$ of size $\abs{S}\leq s(r)$ and a set
$B\subseteq A\setminus S$ of size $\abs{B}\geq m$ which is $r$-independent in
$G-S$. 

To prove \cref{thm:new-uqw} we proceed as follows. 
If for some $s\leq \left\lceil r/2\right\rceil$
we have found a $2s$-independent set, we want to find a large 
$2s+1$-independent subset. This case can easily be handled by the classical Ramsey 
Theorem on nowhere dense classes of graphs. The more
intricate case is to find a few elements to delete such that
we find a large $2s+2$-independent set in a $2s+1$-independent set. 
We alternatingly carry out the constructions for $s=1,\ldots, \left\lceil r/2\right\rceil$ to 
obtain the statement of the theorem. 


\begin{lemma}\label{lem:ramsey1}
Let $G$ be a graph and let $s\in \N$. If $K_t\not\minor_{s} G$ and 
if $A\subseteq V(G)$ is a $2s$-independent set in $G$ of
size at least $\binom{m+t-2}{t-1}$, then there exists
a subset $B\subseteq A$ of size at least $m$ which $2s+1$-independent in $G$. 
\end{lemma}
\begin{proof}
By Ramsey's Theorem, every set of size $\binom{m+t-2}{t-1}$ contains an
independent set of size $m$ or a clique of size $t$. 

As $A$ is $2s$-independent, we can contract the $s$-neighborhood
of each $v\in A$ to obtain a depth-$s$ minor $H$ of $G$. The corresponding elements $N_s[v]$ that we identify with vertices of $H$ form a set $Z$ that is in \mbox{$1$-to-$1$} correspondence 
with~$A$. By assumption, 
$H$ excludes $K_t$ as a subgraph, and hence by Ramsey's Theorem,
we can find an independent set $B'\subseteq Z$ of size $m$ in $H$. 
This set $B'$ corresponds to a $(2s+1)$-independent set $B\subseteq A$ of $G$. 
\end{proof}

For the second, more complicated case, 
we will employ one more lemma, which is based on the fact that
nowhere dense classes of graphs do not have dense 
shallow minors~\cite{dvorak2007asymptotical,jiang2011compact}. 

\begin{lemma}[adaptation of Lemma 4.11 in \cite{gajarsky2017kernelization}]\label{lem:diversity}
Let $\CCC$ be a nowhere dense class of graphs. Let $G\in \CCC$ and let $A\subseteq V(G)$. 
Then for every $\epsilon>0$ there exists $n_0$ such that if $|A|\geq n_0$, then 
\[\abs{\{N(v)\cap A : v\in V(G)\}}\leq\abs{A}^{1+\epsilon}.\]
\end{lemma}

Furthermore, observe that nowhere dense classes are closed under
taking bounded depth minors, as stated in the following lemma. 
The lemma is an immediate consequence of Proposition~4.1 
of~\cite{sparsity}. 

\begin{lemma}
Let $\CCC$ be a nowhere dense class of graphs and let $s\in \N$. 
Then also the class $\{H \minor_s G : G\in \CCC\}$ is nowhere dense. 
\end{lemma}

\begin{corollary}\label{lem:gajarsky}
Let $\CCC$ be a nowhere dense class of graphs and let $s\in \N$. 
Let $G\in \CCC$ and let $A\subseteq V(G)$ be a $2s+1$-independent
set. 
Then for every $\epsilon>0$ there exists $n_0$ such that if $|A|\geq n_0$, then 
\[\abs{\{N_{s+1}(v)\cap A : v\in V(G)\}}\leq\abs{A}^{1+\epsilon}.\]
\end{corollary}

We can now state the main building block of our proof as a lemma. 

\begin{lemma}\label{lem:apex}
Let $\CCC$ be a nowhere dense class of graphs and let $s\in \N$. 
Assume that $K_t\not\minor_{3s+1} G$. 
Let $n_0$ be the constant of \cref{lem:gajarsky} for $\epsilon=1/3$ 
and let $m\geq n_0$ be an integer. 
If $A$ is an $2s+1$-independent set in $G$ of size at least $(4(m+1)^3+2)^{2t+1}$ 
then either 
\begin{itemize}
\item $A$ contains a $2s+2$-independent set $A'$ of size $m$, or
\item there is a subset $A'\subseteq A$ of size at least~$m$ and
a vertex $v\in V(G)$ which is at distance exactly $s+1$ to all vertices of $A'$. 
\end{itemize}
\end{lemma}


%Even though we prove a purely graph theoretic statement, 
%it is useful to see our methods in a more general model-theoretic context. 


%\begin{definition}
%If $\tau$ is a word over an alphabet $\Sigma$ and
%$a\in \Sigma$, then $\tau\cdot a$ denotes the concatenation of~$\tau$
%and $a$.  The \emph{branching index} of a formula $\psi(\tup{x},\tup{y}$
%over a graph $G$ is the largest number
%$\ell$ such that there are tuples of elements
%$\tup{u}_{\sigma_1},\ldots, \tup{u}_{\sigma_{2^\ell}}\in V(G)$, indexed by the
%words over the alphabet $\{0,1\}$ of length exactly $\ell$, and
%tuples of elements $\tup{v}_{\tau_1},\ldots, \tup{v}_{\tau_{2^\ell-1}}$, indexed by the
%words over $\{0,1\}$ of length strictly smaller than $\ell$, such that
%if $\tau_j\cdot a$ is a (not necessarily proper) prefix of~$\sigma_i$, then
%$G\models \psi(\tup{u}_{\sigma_i},\tup{v}_{\tau_j})$ if, and only if, $a=1$. The tuples
%$\tup{u}_{\sigma_1},\ldots, \tup{u}_{\sigma_{2^\ell}}\in V(G)$ are called the 
%\emph{leaves} of the tree, the tuples $\tup{v}_{\tau_1},\ldots, \tup{v}_{\tau_{2^\ell-1}}$
%are its \emph{inner nodes}. Intuitively, a leaf $\tup{u}$ is connected to its 
%predecessors~$\tup{v}$ such
%that $\tup{u}$ is a \emph{right successor} of $\tup{v}$ and not to its predecessors such that 
%it is a \emph{left
%successor}. 
%\end{definition}
     

%\begin{lemma}[\cite{hodges1993model}, Lemma 6.7.9, p.\
%  313]\label{lem:branching}
%  Let $\psi(\tup{x},\tup{y})$ be a formula and let $G$ be a graph. 
%  If $\psi$ has branching index~$k$ over $G$, 
%  then~$\psi$ has ladder index smaller than $2^{k+1}$ over $G$. 
%  If $\psi$ has  has
%  ladder index $k$ over $G$, then $\psi$ has branching index smaller than
%  $2^{k+2}-2$ over $G$.
% \end{lemma}

%In the proof of~\cref{thm:malshelah} one constructs a tree, in which
%elements are iteratively classified according to their types. The depth of 
%the type tree is directly related to the ladder index of the formula, 
%more precisely to the \emph{branching index} of the formula. We refrain
%from defining the branching index here and refer to~\cite{malliaris2014regularity}
%and to Lemma 6.7.9 of the textbook \cite{hodges1993model}, which relates
%ladder index and branching index. In this section we will be working with 
%formula $\phi(x,y)$ with exactly two free variables only. 

To prove the lemma, we will arrange the elements of $A$ in a binary tree
and prove that the tree contains a long path. From this path, we will 
extract the set $A'$. In stability theory, such trees are called \emph{type trees} and they are used to extract long indiscernible sequences, see e.g.~\cite{malliaris2014regularity}. 

Let $T$ be a (rooted) binary tree, where each vertex (except the root) is 
marked as a left or right successor of its predecessor. We call $w$ 
a \emph{left (right) descendant} of $v$ if the first successor on the unique
$v$-$w$ path in $T$ is a left (right) successor.

Fix an enumeration $a_1,\ldots, a_{\ell}$ of $A$ and let $s\in \N$. 
The \emph{distance-$s$ tree}
of $(a_1,\ldots,a_{\ell})$ is a binary tree which is constructed recursively as 
follows. We make $a_1$ the root of the tree. Assume that $a_1,\ldots, a_i$
have been inserted to the tree. We follow a root-leaf path to find the
position for the next element $a_{i+1}$. At a point $a_j$ in the root-leaf path, 
if $\dist(a_j,a_{i+1})\leq s$, we continue along the right branch at $a_j$, otherwise we follow the left branch. If 
there is no right successor (or left successor, respectively), we insert $a_{i+1}$ 
as a right (or left child, respectively) of $a_j$. 

A root-leaf path in $T$ has \emph{$k$ alternations} 
if it contains $k+1$ nodes $a_1,\ldots, a_{k+1}$ (which appear
in that order on the path, possibly not consecutively) such that $a_{i+1}$ is a left descendant of $a_i$
if and only if $a_{i+2}$ is a right descendant of $a_{i+1}$, $1\leq i\leq k-2$. 
The \emph{alternation rank} of $T$ is the largest number $t$ such that 
$T$ contains a $t$-alternating path of length $t$.

\begin{lemma}\label{lem:number-of-nodes}
Let $T$ be a tree of alternation rank $t$. If
$T$ has height at most~$h$, then $T$ has at most $(2h+2)^{t+1}$
vertices. 
\end{lemma}
\begin{proof}
Denote by $n_\ell^s$ the number of vertices a binary tree without a 
an $s$-alternating path can have. Then we have $n_0^s\leq 1$ for all $s\geq 1$
and $n_\ell^1\leq 2\ell-1$ for all $\ell$, and 
\begin{align*}
n_\ell^s\leq 2(n_{\ell-2}^{s-1}+n_{\ell-3}^{s-1}+\ldots + n_{0}^{s-1})+2\ell-1
\end{align*}
for all $s\geq 2,\ell\geq 1$. In the last inequality, we count the vertices on 
the two paths of length at most 
$\ell$ staring in the root which have no alternations (at most $2\ell-1$). 
All nodes branching from 
these paths have one less alternation available, hence there are at most
$ 2(n_{\ell-2}^{s-1}+n_{\ell-3}^{s-1}+\ldots + n_{0}^{s-1})$ of them. 
Now it is easy to check that the function $(2\ell+2)^s$ satisfies these requirements (use $n_0^{s-1}\leq 1$ here). 
\end{proof}

We now prove that in nowhere dense classes the alternation ranks of 
distance trees are small. 

\begin{lemma}\label{thm:alternation-rank-type-tree}
Let $G$ be a graph and let $s\in \N$ such that $K_t\not\minor_{3s+1} G$ and let
$(v_1,\ldots, v_\ell)$ be an enumeration of a $2s+1$-independent set 
in $G$. Then the alternation rank of the distance-$(2s+2)$ tree of 
$(v_1,\ldots, v_\ell)$ is at most~$2t$. 
\end{lemma}
\begin{proof}
Assume that we find a path which is $2k$ alternating, 
containing the nodes $v_{i_1},\ldots, v_{i_{2k+1}}$, $1=i_1<i_2<\ldots <i_{2k+1}$, such that $v_{j+1}$ is a left descendant of $v_j$
if and only if $v_{j+2}$ is a right descendant of $v_{j+1}$, $1\leq j\leq 2k-1$ in
the distance-$(2s+2)$ tree.
For readability, we rename the elements as $a_1,b_1,\ldots, a_k,b_k$ in the 
obvious way. We assume that $b_1$ is right of $a_1$ in the distance-$(2s+2)$ 
tree, otherwise, we consider
the path $b_1,a_2,b_2,\ldots,a_k, b_k$. 

\begin{claim}
For every pair $a_i,b_j$, $1\leq i\leq k, i\leq j\leq k$, there
is a vertex $z_{ij}$ which is at distance exactly $s+1$ to 
$a_i$ and $b_j$ and which is at distance greater than $s+1$ 
to all $b_\ell$, $\ell\neq j$. 
\end{claim}

\noindent\textit{Proof.} 
Because $b_j$, $j\geq i$, is right of $a_i$ in the distance-$(2s+2)$ tree, 
there is a path of length at most $2s+2$ between $a_i$ and $b_j$. 
Because $(v_1,\ldots, v_n)$ is $2s+1$-independent in~$G$, this path
must have length exactly $2s+2$, and hence there is an element $z_{ij}$ 
at distance exactly $s+1$ both to $a_i$ and $b_j$. 
If $z_{ij}$ was at distance $s+1$ to $b_\ell$, $\ell\neq j$, then $b_\ell$ would be adjacent 
to $b_j$ in the distance-$(2s+2)$ tree, which it is not. \hfill$\lrcorner$

\bigskip
Now let $X_j\coloneqq N_s[b_j]\cup N_s[a_j]\cup\{z_{ij} : 1\leq i\leq j\}$
for all $1\leq j\leq k$. $X_j$ is connected and has radius at most $3s+1$. 
As $z_{ij}$ has distance at least $s+1$ to all $a_\ell, b_\ell$, these sets 
are disjoint. 
As $a_i$ is at distance $s+1$ to $z_{ij}$ and 
$a_i\in X_i$ and $z_{ij}\in X_j$ for $i\neq j$, 
we have constructed a complete graph $K_k$ as depth-$(3s+1)$ minor. Hence 
$k\leq t-1$, which proves the claim. 
\end{proof}

%
%Note that the above proof does not give a proof that the ladder
%index of the distance-$2$ formula is at most $2(t-1)$. In the type
%tree we have the stronger statement that the vertices $b_i$
%are not connected by a path of length $2$. 
%We make no statement about the connections
%of these elements in the ladder. 


We can now prove \cref{lem:apex}. 

\begin{proof}[of \cref{lem:apex}]
Fix any enumeration $v_1,\ldots, v_\ell$ of $A$ and
build the distance-$(2s+2)$ tree~$T$ for
$v_1,\ldots,v_\ell$. According to~\cref{thm:alternation-rank-type-tree}, 
the alternation rank of $T$ is at most~$2t$. 

According 
to~\cref{lem:number-of-nodes}, $T$ has depth at least $2(m+1)^3$, hence, 
it contains a path of length at least $2(m+1)^3$. We choose the largest set $X$
of vertices on that path without alternations, which has hence length
at least $(m+1)^3$. 

Either, $X$ is a set with all its successors in $T$ on the left, 
then $X$ is a $(2s+2)$-independent set and we let $A'=X$ and finish the proof.

Otherwise, the vertices of $X$ are pairwise at distance $(2s+2)$. Let $\ell+1=|X|$. 
We claim that we find an element which is at distance exactly $s+1$ 
to at least $\ell^{1/3}$
of the vertices of~$X$. There are $\binom{\ell+1}{2}\geq \ell^2/2$ pairs in $X$ which 
must be connected via an intermediate vertex. A vertex which is at distance
exactly $s+1$ to $d$ vertices of $A$ can create $\binom{d}{2}\leq d^2/2$ of such connections. 
Hence, if there is no vertex with $|N_{s+1}(v)\cap A|\geq \ell^{1/3}$, 
we need $\ell^{4/3}$ vertices with distinct $(s+1)$-neighborhoods
to create all connections. As $\ell\geq n_0(1/3)$, 
this contradicts \cref{lem:gajarsky}. Hence there exists a vertex $v$ which is 
at distance exactly $s+1$ to at least $m$ vertices of $A$, 
we let $A'=N_r(v)\cap A$ and finish the proof. 
\end{proof}

We iteratively apply \cref{lem:apex}, always adding the apex vertex 
returned by the lemma to the set $S$, until we find a large 
$(2s+2)$-independent subset of $A$ in $G-S$. For the induction, we
define a function $R$ such that $R(m,1)=(4(m+1)^3+2)^{2t+1}$
and $R(m, i+1)=(4(R(m,i)+1)^3+2)^{2t+1}$.

\begin{lemma}\label{lem:iterate-apex}
Let $\CCC$ be a nowhere dense class of graphs. 
Let $n_0$ be the constant of \cref{lem:gajarsky} for $\epsilon=1/3$. 
Let $s\in \N$ and assume $K_t\not\minor_{3s+1} G$. 
Let $m\geq n_0$ be an integer. 
Let $A$ be a $(2s+1)$-independent set in $G$ of size at least $R(m,t)$. 
Then there is a subset $A'\subseteq A$ of size at least~$m$ and a 
a set $S\subseteq V(G)\setminus A$ of size at most $t-1$ such that
\begin{enumerate}
\item every vertex of $S$ is at distance exactly $s+1$ to 
every vertex of $A'$, and
\item $A'$ is $(2s+2)$-independent in $G-S$. 
\end{enumerate} 
\end{lemma}
\begin{proof}
Apply \cref{lem:apex} inductively. In step $i$ of the induction,
either the lemma returns a $(2s+2)$-independent $A'$ or a vertex $v$
with $N_{s+1}(v)\cap A=A'$ of size $R(m,t-i)$. In the second
case, add the vertex $v$ to $S$. We claim that after $t-1$
iterations we must be in the first case. Otherwise, enumerate the set $S$ 
as $(s_1,\ldots, s_t)$ and consider the sets
$X_i=N_s^{G-S}[a_i]\cup \{s_i\}$, $1\leq i\leq t$. Each~$X_i$ has radius
$s+1$, the $X_i$ are disjoint, and $X_i$ has a vertex connected to $s_j\in X_j$, $i\neq j$, 
hence we have found $K_t$ as a depth-$s+1$ minor, contradicting
our assumption. 
\end{proof}

We now proceed by induction on $r$. 

%\begin{lemma}\label{lem:ramsey2}
%Let $G$ be a graph such that $K_t\not\minor_r G$. 
%If $A$ is $2r$-independent and
%has size at least $\binom{m+t-2}{t-1}$, then there exists
%a subset $B\subseteq A$ of size at least $m$ which is a
%$(2r+1)$-independent set. 
%\end{lemma}
%\begin{proof}
%As $A$ is $2r$-independent, we can contract the $r$-neighborhood
%of each $v\in A$. The corresponding elements $N_r[v]$ in the resulting 
%depth-$r$ minor $H$ form a set $Z$ that is in \mbox{$1$-to-$1$} correspondence 
%with $A$. By assumption, 
%$H[Z]$ excludes $K_t$ as a subgraph, and hence by \cref{lem:ramsey1},
%it contains an independent set $B'\subseteq Z$ of size $m$ in $H$. 
%This set $B'$ corresponds to a $(2r+1)$-independent set $B\subseteq A$ of $G$. 
%\end{proof}
%
%\begin{lemma}\label{lem:distance-apex}
%Let $\CCC$ be a nowhere dense class of graphs. 
%Let $n_0$ be the constant of for $\epsilon=1/3$. 
%Assume $K_t\not\minor_{r+2} G$. 
%Let $m\geq n_0$ be an integer. 
%Let $A$ be a $(2r+1)$-independent set in $G$ of size at least $R(m,t)$. 
%Then there is a subset $A'\subseteq A$ of size at least~$m$ and a 
%a set $S\subseteq V(G)\setminus A$ of size at most $t-1$ such that
%\begin{enumerate}
%\item every vertex of $S$ is connected to a vertex at distance $r$ of $w$ for 
%every $w\in A'$, and
%\item $A'$ is $(2r+2)$-independent in $G-S$. 
%\end{enumerate} 
%\end{lemma}
%\begin{proof}
%As $A$ is $(2r+1)$-independent, we can contract the $r$-neighborhood
%of each $v\in A$. The corresponding elements $N_r[v]$ in the resulting 
%depth-$r$ minor $H$ form a set $Z$ that is in $1$-to-$1$ correspondence 
%with $A$. As $A$
%is $(2r+1)$-independent, $Z$ is independent in $H$. We now apply 
%\cref{lem:iterate-apex} to $Z$ in $H$. Note that the depth-$2$ minor
%we construct in \cref{thm:alternation-rank-type-tree} (now applied to $H$) 
%uses as connecting vertices $z_{ij}$ original vertices of the graph and
%not contracted vertices. Hence, when we apply the lemma, we may 
%use the assumption that $K_t\not\minor_{r+2} G$ (in general, 
%a depth-$2$ minor of a depth-$r$ minor may be a depth-$5r$ minor
%of the original graph~see Proposition~4.1 of~\cite{sparsity}). 
%Also, the vertices $v$ returned by 
%\cref{lem:iterate-apex} correspond to vertices of the graph $G$ and not
%to contracted neighborhoods. In particular, as $A$ is $(2r+1)$-independent, 
%the vertices $v$ returned by the lemma have distance exactly $r$ to 
%the vertices $w\in A$. The set $Z'$ returned by \cref{lem:iterate-apex}
%for $H$ is $2$-independent in $H$, and hence the corresponding 
%subset $B\subseteq A$ of $G$ is $(2r+2)$-independent. 
%in $G$. 
%\end{proof}

\begin{proof}[of \cref{thm:new-uqw}]
Alternatingly apply \cref{lem:ramsey1} and \cref{lem:iterate-apex} 
for $r$ times. Note that throughout the process we delete a set $S$ of 
size at most $t-1$, if $K_t\not\minor_{r+1} G$, as we can argue 
for the union of the sets $S$ found in each iteration, as in the proof
of \cref{lem:iterate-apex}. Furthermore, 
$\binom{m+t-2}{t-1}\leq (4(m+1)^3+2)^{2t+1}$. 
Then, if we start with a set $A$ of size at least 
$R(m,r+t)\in\Oof_{r,t}(m^{(6t+3)^{t+r}})$, the 
subset $B\subseteq A$ will have size $m$. This proves \cref{thm:new-uqw}. 
\end{proof}

TODO: Algorithmic version

We now come to the proof of \cref{thm:new-vc}. A set $X$ of vertices 
in a graph is \emph{shattered} (resp. \emph{$2$-shattered}) if for every
subset $Y\subseteq X$ (resp. every subset $Y\subseteq X$ of size $2$) there exists 
a vertex $v$ such that $N[v]\cap X=Y$. The \emph{Vapnik-Chervonenkis dimension}, short \emph{VC-dimension}~\cite{chervonenkis1971theory} (resp.
$2$VC-dimension) of a graph is the maximum size of a shattered set (resp. $2$-shattered set). The measure VC-dimension found has many applications, e.g.\ in learnability theory~\cite{haussler1987}, computational geometry~\cite{chazelle1989quasi} and graph theory~\cite{alon2006dominating,BousquetT15,chepoi2007covering,eickmeyer2016neighborhood}.


The \emph{$r$th power of a graph $G$} is the graph $G^r$
with vertex set $V(G)$, where there is an edge between two 
vertices $u$ and $v$ if and only if their distance in $G$ is at most $r$. 

We observe that an argument of Bousquet and 
Thomasse\'e~\cite{BousquetT15} can be slightly modified to prove that 
the $2$VC-dimension of the $r$-power graph $G^r$ of a graph $G$
with $K_t\not\minor_r G$ is small. Obviously, the $2$VC-dimension of $G$
bounds its VC-dimension. We hence prove a stronger result
than stated as \cref{thm:new-vc} in the introduction. 

\begin{theorem}
Let $r\in \N$ and let $G$ be a graph. 
If $K_t\not\minor_r G$, then the $2$VC-dimension of $G^r$
is at most $t-1$. 
\end{theorem}
\begin{proof}
Assume there is a set $A=\{a_1,\ldots, a_t\}$ of size $t$ such that
for all subsets $\{a_i,a_j\}\subseteq A$ of size $2$ 
there is an element $v_{ij}\in V(G)\setminus A$ with 
$N_r[v_{ij}]\cap A=\{a_i,a_j\}$. Fix $v_{ij}$ with the property
that $\max\{\dist_G(v_{ij},a_i), \dist_G(v_{ij},a_j)\}$ is 
minimised. 

A \emph{central walk} $W_{ij}$ is the concatenation of a minimum length
path $P_{ij}^i$ from $a_i$ to $v_{ij}$ and a minimum length path $P_{ij}^j$ from $v_{ij}$ to $a_j$. 
Note that a central walk is possibly not a path. For each pair $a_i,a_j$ fix
a central walk $W_{ij}$ and the corresponding paths $P_{ij}^i$ and $P_{ij}^j$. 

Now assume that a vertex $x$ belongs to two distinct central 
walks $W_{ij}$, $W_{i'j'}$. Assume that $x$ lies on $P_{ij}^i$ and $P_{ij}^{i'}$,
otherwise, rename the elements. First, observe that if $\dist(x,a_i)=\dist(x,a_{i'})$, 
then $a_i=a_{i'}$. Otherwise, $\dist(v_{ij},a_{i})=\dist(v_{ij},a_{i'})$ and hence 
$a_j=a_i$, and analogously, $a_{j'}=a_j$, contradicting the assumption 
that $W_{ij}$ and $W_{i'j'}$ are distinct. By the same argument we have 
$\dist(x,a_i)<\dist(x,a_j)$ and $\dist(x,a_{i'})<\dist(x,a_{j'})$. 
Now assume that $\dist(x,a_i)<\dist(x,a_{i'})$. By the same argument as 
above we have $a_{j'}=a_i$, hence $W_{i'j'}=W_{ij'}$. Here, we have
$\dist(x,a_i)<\dist(x,a_j)$ and $\dist(x,a_{i})<\dist(x,a_{i'})$, 
otherwise the walks are not distinct. 

Let us now construct connected subsets $X_i$ for all $1\leq i\leq t$. 
For every walk $W_{ij}$ the vertices of $W_{ij}$ closer to $a_i$ than to $a_j$ 
are added to $X_i$, the vertices of $W_{ij}$ closer to $a_j$ than to $a_i$ 
are added to $X_j$, ties are broken arbitrary.
Then the sets $X_i$ are pairwise disjoint by what we proved above. If a vertex $x$
appears in two distinct central walks, these are $W_{ij}$ and $W_{i\ell}$ for some
$i,j,\ell$ with $\dist(x,a_i)<\dist(x,a_j)$ and $\dist(x,a_i)<\dist(x,a_\ell)$. 
In both cases $x$ belongs to $X_i$. By construction, the sets $X_i$ are connected, 
have radius at most~$r$, and 
there is always an edge between a vertex of $X_i$ and a vertex of $X_j$ since $X_i\cup X_j$ 
contains the walk $W_{ij}$. Therefore, if the $2$VC-dimension is at least $t$, the 
graph contains $K_t$ as a depth-$r$ minor. 
\end{proof}